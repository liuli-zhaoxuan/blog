# 小项目：esp32_lvgl学习开发板
摘要：这是为esp32_lvgl学习开发板项目做的知识调研，涉及到了**屏幕选择**等知识。

契机：嘉立创又有活动了，基于esp32的项目实践。上个月是基于STC32芯片的项目，和川老师一起做了一个平衡车，结果因为各种原因以失败告终，失败原因记录在另一篇博客《STC32直流平衡车项目总结》。这一次是熟悉的芯片，打算做一个简单的项目：全息投影盒。其中最重要的部分就是一块能显示屏幕的开发板，其他就是一些机械和光学设计了。

## 一、屏幕选择
这次我的想法是实现一个彩色屏幕显示动画，根据我B站调研的一些项目，我至少需要一块能显示彩色的屏幕。
但是网上的屏幕五花八门，有圆形的、方形、长条形，大小也各有差异。屏幕的种类也很多：TFT、LCD、OLED、AMOLED、TN、IPS、VA、CRT……等概念我都不清楚，所以这先梳理一下屏幕的一些基本属性。

### 1.材质和显示技术
**CRT**:以前的大脑袋电视机和电脑显示器就是这种技术，比较少见了。

>CRT显示器学名为“阴极射线显像管”，是一种使用阴极射线管（Cathode Ray Tube）的显示器。主要有五部分组成：电子枪（Electron Gun）、偏转线圈（Deflection coils）、荫罩(Shadow mask)、高压石墨电极和荧光粉涂层(Phosphor)及玻璃外壳。

剩下的就分为LCD、OLED两大类。**LCD**包括: TFT、TN、IPS、VA；**OLED**包括：PMOLED、AMOLED。
**两个大类的定义**：
>**LCD**（ Liquid Crystal Display 的简称）液晶显示器。LCD 的构造是在两片平行的玻璃基板当中放置液晶盒，下基板玻璃上设置TFT（薄膜晶体管），上基板玻璃上设置彩色滤光片，通过TFT上的信号与电压改变来控制液晶分子的转动方向，从而达到控制每个像素点偏振光出射与否而达到显示目的。LCD已经替代CRT成为主流，价格也已经下降了很多，并已充分普及。

>**OLED**（OrganicLight-Emitting Diode），又称为有机电激光显示、有机发光半导体（OrganicElectroluminesence Display，OLED）。OLED属于一种电流型的有机发光器件，是通过载流子的注入和复合而致发光的现象，发光强度与注入的电流成正比。OLED在电场的作用下，阳极产生的空穴和阴极产生的电子就会发生移动，分别向空穴传输层和电子传输层注入，迁移到发光层。当二者在发光层相遇时，产生能量激子，从而激发发光分子最终产生可见光。

**两个大类的区别总结**：

LCD需要一个大大的背光板（一个只发白光的大面板），就这导致了他不能弯折了。而oled因为是自发光，每个独立单元拼凑起来，这种天生好处让其具有了柔韧性，所以现在高端曲面屏、折叠屏基本都是oled屏。

至于说省电问题，根据发光原理不同其实不是很好判断，因为LCD需要背板一直发光，OLED在满屏点亮的情况和黑屏的功耗完全就是两回事，所以用电没有啥好说的。

**TFT、TN、VA、IPS、SLCD的概念：**
>TFT（Thin Film Transistor）即薄膜场效应晶体管，属于有源矩阵液晶显示器中的一种。TFT液晶显示屏的特点是亮度好、对比度高、层次感强、颜色鲜艳，但也存在着比较耗电和成本较高的不足。比如大名鼎鼎的JDI屏幕，就是属于TFT-LCD显示屏，它采用LTPS低温多晶硅技术屏幕。相比传统LCD屏幕，JDI屏幕更加轻薄和更具通透性。采用JDI屏幕的代表机型有很多，比如华为mate10 ，努比亚红魔游戏手机。

>TN面板，全称Twisted Nematic（扭曲向列型）面板，是显示屏屏幕的一种类型。由于低廉的生产成本使TN成为了应用最广泛的入门级液晶面板，在市面上主流的中低端液晶显示器中被广泛使用。

>VA ( vertical alignment ) 面板，可细分为MVA ( multi-domain vertical alignment )与PVA ( patterned vertical alignment )两种。是现在高端液晶应用较多的面板类型，属于广视角面板。它属于8位面板，优点在于可视角度较大，方便多人同时观看屏幕，另外还拥有相对较高的对比度，其文字显示特别清晰，多用于中高端商用液晶显示器。VA面板的不足之处在于，在动态画面时，色彩衔接不太好，高速画面比较容易产生拖影现象，所以视频编辑用户需慎用VA面板的液晶显示器。

>IPS技术为日本日立公司于1996年开发成功的显示技术，是一种LCD广视角技术，被广泛的使用在LCD-TV的制造上，能有效改善当视角差时，在TN屏幕上出现的色差及其他问题。IPS俗称“Super TFT”，是由TFT升级而来的一种技术，本质还是TFT屏幕，只不过是采用IPS技术的TFT屏。相对于普通的TFT屏，它拥有可视角度大、色彩还原准确、触摸无水纹、环保省电等优势。

>SLCD是英文Splice Liquid Crystal Display的缩写，即拼接专用液晶屏。SLCD是LCD的一个高档衍生品种，采用世界最先进的工业级的液晶面板，使用寿命长达6万小时。SLCD是一个完整的拼接显示单元，既能单独作为显示器使用，又可以拼接成超大屏幕使用。SLCD是拼接专用液晶屏,是LCD的一个高档进阶品种，特点是色彩更暖，还原真实，更自然，适合人眼观看。

**PMOLED和AMOLED的区别**
>PMOLED即被动矩阵有机电激发光二极管(Passive matrix OLED)。

>AMOLED（英语：Active-matrix organic light-emitting diode，中译：有源矩阵有机发光二极体或主动矩阵有机发光二极体）是一种显示屏技术。其中OLED（有机发光二极体）是描述薄膜显示技术的具体类型：有机电激发光显示；AM（有源矩阵体或称主动式矩阵体）是指背后的像素寻址技术。目前AMOLED技术主要用于智能手机，并继续朝低功耗、低成本、大尺寸方向发展。AMOLED屏幕拥有可弯曲，广色域的特性，显示的颜色更加鲜艳，并且具有自发光低功耗等优点，已经成为主流高端手机热选。

### 2.色域
>色域是对一种颜色进行编码的方法，也指一个技术系统能够产生的颜色的总和。在计算机图形处理中，色域是颜色的某个完全的子集。颜色子集最常见的应用是用来精确地代表一种给定的情况。例如一个给定的色彩空间或是某个输出装置的呈色范围。

>sRGB(standard Red Green Blue)是由Microsoft影像巨擘共同开发的一种彩色语言协议，微软联合爱普生、HP惠普等提供一种标准方法来定义色彩，让显示、打印和扫描等各种计算机外部设备与应用软件对于色彩有一个共通的语言。

>NTSC色域指的是NTSC标准下的颜色的总和。首先,色域是对一种颜色进行编码的方法，也指一个技术系统能够产生的颜色的总和。

**如果是购买显示屏的话，色域达到100%sRGB和72%NTSC就算高色域了，越高越好。**

### 3.刷新率
屏幕的刷新次数，单片机产品的刷新速率我还没有涉及到，基本够用。在购买显示器时比较关注这个东西，一般75Hz就可以日常办公了。FPS游戏的话120Hz、144Hz也够用了。

### 4.广视角
>广视角是指拍摄可视角度比较大的一种情况，用过LCD的都知道正面看画面很漂亮，侧面看就会变色，广视角从侧面看变色程度会低很多。

### 5.雾面屏与镜面屏
雾面屏更适合在室外或者照明强度大的地方使用，镜面更好看，不重要。

### 屏幕选择小结
好的，到这里，我为了去选一款单片机屏幕，去把显示屏幕的一些概念都过了一遍。最后我选择了一个带转接板的2.8寸(对角线2.8英寸，1英寸=2.54cm，屏幕比例一般时3：4)，所以大小为：4.27x5.69cm。选择带转接板是因为之后我可以把这块屏幕用到其他项目中去。

## 二、显示屏电路知识
想要使用一块显示屏幕就需要知道用什么协议去使用，但是当我看到网上各种屏幕的引脚时，又懵了：RST、WR、RD、BL、NC、SS......当我以为某个屏幕时SPI协议时，却没有发现MOSI线，所以这里将屏幕所用到的一些引脚先介绍一下，算是一些通用知识储备吧。

<style>
.center 
{
  width: auto;
  display: table;
  margin-left: auto;
  margin-right: auto;
}
</style>
<p align="center"><font face="黑体" size=2.>引脚定义表</font></p>
<div class="center">

|   序号   |        描述         |
|  :---:   |:---------------  |
|    RST   |复位         |
|    WR    |写命令       |
|    RD    |读命令       |
|    BL    |背光亮度，设置原理和PWM差不多|
|  SS/CS   |片选（多个从设备时作用）       |
|  DC/RS   |选择数据/命令寄存器       |
|SCK/SLK/SCLK|时钟线       |
| MOSI/SDO |SPI数据线，主机数据输出，从机输入|
| MISO/SDI |SPI数据线，主机数据输入，主机输出|
|    NC    |No Connect,浮空    |

</div>
我的观点：每个开发板的定义引脚命名方式不同，最好还是先确定好通讯协议：SPI或者IIC等，然后配合屏幕接口说明书去使用，盲目猜测真的烧脑，而且SPI也有三线和四线的区别，所以不要猜，查资料是最稳妥的做法。
